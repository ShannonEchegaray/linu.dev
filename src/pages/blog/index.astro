---
import Layout from 'layout/Layout.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog')).sort(
	(a, b) => a.data.publishDate.valueOf() - b.data.publishDate.valueOf()
)
console.log(posts.map(post => post.slug))
---
<Layout>
    <section class=''>
        <ul>
            {
                posts.map((post) => (
                    <li class=''>
                        <time datetime={post.data.publishDate.toISOString()}>
                            {post.data.publishDate.toLocaleDateString('en-us', {
                                year: 'numeric',
                                month: 'short',
                                day: 'numeric',
                            })}
                        </time>
                        <a href={`/blog/${post.slug}/`}>{post.data.title}</a>
                        {console.log(`/blog/${post.slug}/`)}
                    </li>
                ))
            }
        </ul>
    </section>    
</Layout>